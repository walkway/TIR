# 객체지향의 사실과 오해

## 타입과 추상화
### 추상화
- 지하철 노선 추상화: 지하철 노선도의 핵심은 지형보다는 연결, 열차를 갈아타는 것
- 추상화란 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질을 드러나게 하는 과정
- 추상화의 수준, 이익, 가치는 목적에 의존적이다.
- 현상은 복잡하다. 법칙은 단순하다. 버릴 게 무엇인지 알아내라.
- 추상화: 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법
  - 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
  - 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것
  - 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화 하는 것
- 그룹으로 나누어 단순화하기, 개념을 이용하면 객체를 여러 그으로 분류(classification)할 수 있다.
- 개념의 관점
  - 심볼: 개념을 가리키는 간략한 이름이나 명칭 
    ex) 트럼프
  - 내연: 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다. 
    ex) 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있다.
  - 외연: 개념에 속하는 모든 객체의 집합
    ex) 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들 ...

### 타입
- 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관렴을 의미한다. 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다. 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.
- 타입은 데이터가 어떻게 사용되느냐에 관한 것이다.
- 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.
- 어떤 객체가 어떤 타입에 속하는지 결정하는 것은 객체가 수행하는 행동이다.
- 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.
- 같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있다. 동일한 행동은 동일한 책임을 의미하고, 동일한 책임은 동일한 메시지 수신을 의미한다. -> 다형성
- 일반화/특수화 관계
  - ex) 트럼프/트럼프 인간
  - 트럼프는 트럼프 인간보다 더 일반적 개념, 포괄적 의미 내포
  - 일반화/특수화 관계를 결정하는 것은 객체의 상태를 표현하는 데이터가 아니라 행동
  - 일반적인 타입은 특수한 타입보다 외연의 크기는 더 크고 행동의 수는 더 작다.
- 타입은 추상화다, 타입을 이용하면 객체의 동적인 특성을 추상화 할 수 있다.
- 타입은 객체를 분류하기 위해 사용하는 개념이다. 클래스는 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나이다.

## 역할, 책임, 협력
### 협력
- 요청과 응답 

### 책임
- 객체지향 개발에서 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것
- 책임의 분류: 객체가 무엇을 알고 있는가 knowing, 무엇을 할 수 있는가 doing
- doing
  - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
  - 다른 객체의 행동을 시작시키는 것
  - 다른 객체의 행동을 제어하고 조절하는 것
- knowing
  - 개인적인 정보에 관해 아는 것
  - 관련된 객체에 관해 아는 것
  - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
- 책임은 공용 인터페이스 public interface 를 구성한다.
- 메시지 전송: 책임을 수행하도록 요청을 보내는 것, 협력에 참여하는 두 객체 사이 관계를 강조

### 역할
- 책임의 집합
- 역할은 재사용 가능하고 유연한 객체지향 설계를 만드는 중요한 구성 요소
- 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체
- 유사한 협력을 추상화해서 인지 과부화를 줄일 수 있다.
- 단순성implicity, 유연성flexibility, 재사용성reusability
- 역할의 대체 가능성 = 행위 호환성, 행위 호환성 = 동일한 책임의 수행

### 객체의 모양을 결정하는 협력
- 협력을 설계하는 것은 객체가 주고받는 요청과 응답의 흐름을 결정하는 것
- 결정된 요청과 응답의 흐름은 객체가 협력에 참여하기 위해 수행될 책임
- 객체에게 책임을 할당하고 나면 책임은 객체가 외부에 제공하게 될 행동
- 이후 필요한 데이터 고민

## 책임과 메시지
- 객체가 책임을 자율적으로 수행하기 위해서, 객체에게 할당되는 책임이 자율적이여야 한다.
- 책임은 협력에 참여하는 의도를 명확하게 설명할 수 있는 수준에서 추상적이어야 한다.
- 객체가 무엇을 해야하는가를 설명한다. (어떻게 how 보다는)
- 메시지 전송: 수신자, 메시지 이름, 인자 조합 구성
- 메시지는 객체가 서로 협력하기 위해 사용할 수 있는 의사소통 수단
- 다형성: 서로 다른 유형의 객체가 동일한 메시지에 대하 다르게 반응하는 것
- 자율적인 책임은 협력을 단순하게 만든다.
- 자율적인 책임은 외부와 내부를 명확히 분리한다.
- 책임이 자율적일 경우 책임ㅇ르 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.
- 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.
- 객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다.

## 객체 지도
- 구조: 사용자나 이해관계자들이 도메인에 관해 생각하는 개념과 개념들 간의 관계로 표현
- 기능: 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현
- 요구사항들을 식별하고 도메인 모델을 생성한 후, 소프트웨어 클래스에 메서드들을 추가하고, 요구사항을 충족시키기 위해 객체들 간의 메시지 전송을 정의하라
- 기능 변경을 흡수하는 안정적인 구조

### 함께 모으기
- 개념 관점: 도메인을 구성하는 중요한 개념과 관계
- 명세 관점: 클래스의 인터페이스
  - pulibc 메서드는 다른 클래스가 협력할 수 있는 공용 인터페이스를 드러 낸다.
  - 변화에 안정적인 인터페이스를 만들기 위해서는 인터페이스를 통해 구현과 관련된 세부 사항이 드러나지 않게 해야 한다.
 - 구현 관점: 클래스의 내부 구현
  - 원칙적으로 외부 객체에게 영향을 미쳐서는 안된다.
- 인터페이스와 구현을 분리하라